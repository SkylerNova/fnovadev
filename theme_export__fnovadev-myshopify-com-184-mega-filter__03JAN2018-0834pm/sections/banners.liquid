{% schema %}
  {
    "name": "Hero Banners",
    "class": "banners",
  "max_blocks": 15,
    "settings": [
      {
        "type": "header",
        "content": "General"
      },
    {
        "type": "checkbox",
        "id": "full_width",
        "label": "Full width?",
        "default": true
      },
    {
        "type": "checkbox",
        "id": "full_height",
        "label": "Full height?",
        "default": true
      },
    {
        "type": "text",
        "id": "img_height",
        "label": "Height (if not full)",
        "default": "45%"
      },
    {
        "type": "select",
        "id": "fade",
        "label": "Effect",
        "options": [
          {"value": "false","label": "Slide"},
          {"value": "true","label": "Fade in\/out"}
        ],
        "default": "true"
      }
    ],
    "blocks": [
      {
        "type": "slide",
        "name": "Slide",
        "settings": [
      {
            "type": "select",
            "id": "text_align",
            "label": "Text Alignment",
            "options": [
              {"value": "left", "label": "Left"},
        {"value": "center", "label": "Center"},
        {"value": "right", "label": "Right"}
            ],
            "default": "center"
          },
          {
            "type": "image_picker",
            "id": "image",
            "label": "Background Image"
          },
          {
            "type": "image_picker",
            "id": "image_small",
            "label": "Background Image (mobile)"
          },
          {
            "type": "url",
            "id": "link",
            "label": "Link",
            "info": "Optional"
          },
          {
            "type": "text",
            "id": "video",
            "label": "Video",
            "info": "Optional"
          },
          {
            "type": "text",
            "id": "alt",
            "label": "ALT"
          },
          {
            "type": "checkbox",
            "id": "wide_image",
            "label": "Wide Image?",
            "default": true
          },
          {
            "type": "checkbox",
            "id": "show_captions",
            "label": "Show captions?",
            "default": true
          },
      {
            "type": "text",
            "id": "overlay_color",
            "label": "Background color (r,g,b,a)",
            "default": "0,0,0,0",
      "info": "0,0,0,0 for no background"
          },
          {
            "type": "text",
            "id": "title",
            "label": "Title"
          },
      {
            "type": "richtext",
            "id": "text",
            "label": "Description"
          },
      {
            "type": "text",
            "id": "button",
            "label": "Button"
          },
      {
            "type": "header",
            "content": "Button Position"
          },
          {
            "type": "text",
            "id": "button_top",
            "label": "Top"
          },
      {
            "type": "text",
            "id": "button_right",
            "label": "Right"
          },
      {
            "type": "text",
            "id": "button_bottom",
            "label": "Bottom"
          },
      {
            "type": "text",
            "id": "button_left",
            "label": "Left"
          },
      {
            "type": "header",
            "content": "Effects"
          },
      {
            "type": "select",
            "id": "title_effect",
            "label": "Title Effect",
            "options": [
              {"value": "fadeIn",     "label": "fadeIn"},
        {"value": "fadeInDown",   "label": "fadeInDown"},
        {"value": "fadeInLeft",   "label": "fadeInLeft"},
        {"value": "fadeInRight",  "label": "fadeInRight"},
        {"value": "fadeInUp",   "label": "fadeInUp"},
        {"value": "bounceIn",   "label": "bounceIn"},
        {"value": "bounceInDown", "label": "bounceInDown"},
        {"value": "bounceInLeft", "label": "bounceInLeft"},
        {"value": "bounceInRight","label": "bounceInRight"},
        {"value": "bounceInUp",   "label": "bounceInUp"},
          {"value": "flipInX",    "label": "flipInX"},
        {"value": "flipInY",    "label": "flipInY"},
        {"value": "zoomIn",     "label": "zoomIn"},
        {"value": "zoomInDown",   "label": "zoomInDown"},
        {"value": "zoomInLeft",   "label": "zoomInLeft"},
        {"value": "zoomInRight",  "label": "zoomInRight"},
        {"value": "zoomInUp",   "label": "zoomInUp"}
            ],
            "default": "fadeInUp"
          },
      {
            "type": "select",
            "id": "text_effect",
            "label": "Description Effect",
            "options": [
              {"value": "fadeIn",     "label": "fadeIn"},
        {"value": "fadeInDown",   "label": "fadeInDown"},
        {"value": "fadeInLeft",   "label": "fadeInLeft"},
        {"value": "fadeInRight",  "label": "fadeInRight"},
        {"value": "fadeInUp",   "label": "fadeInUp"},
        {"value": "bounceIn",   "label": "bounceIn"},
        {"value": "bounceInDown", "label": "bounceInDown"},
        {"value": "bounceInLeft", "label": "bounceInLeft"},
        {"value": "bounceInRight","label": "bounceInRight"},
        {"value": "bounceInUp",   "label": "bounceInUp"},
          {"value": "flipInX",    "label": "flipInX"},
        {"value": "flipInY",    "label": "flipInY"},
        {"value": "zoomIn",     "label": "zoomIn"},
        {"value": "zoomInDown",   "label": "zoomInDown"},
        {"value": "zoomInLeft",   "label": "zoomInLeft"},
        {"value": "zoomInRight",  "label": "zoomInRight"},
        {"value": "zoomInUp",   "label": "zoomInUp"}
            ],
            "default": "fadeInUp"
          },
          {
            "type": "select",
            "id": "button_effect",
            "label": "Button Effect",
            "options": [
              {"value": "fadeIn",     "label": "fadeIn"},
        {"value": "fadeInDown",   "label": "fadeInDown"},
        {"value": "fadeInLeft",   "label": "fadeInLeft"},
        {"value": "fadeInRight",  "label": "fadeInRight"},
        {"value": "fadeInUp",   "label": "fadeInUp"},
        {"value": "bounceIn",   "label": "bounceIn"},
        {"value": "bounceInDown", "label": "bounceInDown"},
        {"value": "bounceInLeft", "label": "bounceInLeft"},
        {"value": "bounceInRight","label": "bounceInRight"},
        {"value": "bounceInUp",   "label": "bounceInUp"},
          {"value": "flipInX",    "label": "flipInX"},
        {"value": "flipInY",    "label": "flipInY"},
        {"value": "zoomIn",     "label": "zoomIn"},
        {"value": "zoomInDown",   "label": "zoomInDown"},
        {"value": "zoomInLeft",   "label": "zoomInLeft"},
        {"value": "zoomInRight",  "label": "zoomInRight"},
        {"value": "zoomInUp",   "label": "zoomInUp"}
            ],
            "default": "fadeInUp"
          }
        ]
      }
    ],
    "presets": [
      {
        "name": "Hero Banners",
        "category": "Home",
        "blocks": [
          {
            "type": "slide"
          },
          {
            "type": "slide"
          }
        ]
      }
    ]
  }
{% endschema %}

<div id="carousel" class="{% unless section.settings.full_width %}container{% endunless %}">
    {% for block in section.blocks %}
      {% if block.settings.wide_image == true %} 
      <div class="item wide" id="block-{{ block.id }}">
      {% else %}
      <div class="item not-wide" id="block-{{ block.id }}">
      {% endif %}
        {% if block.settings.show_captions == false and block.settings.link != blank %}
          <a href="{{block.settings.link}}">
        {% elsif block.settings.show_captions == false and block.settings.video != blank %}
          <a class="fancybox fancybox.iframe" href="{{block.settings.video}}?autoplay=1&loop=1&autopause=0">          
        {% endif %}
            
            {% if block.settings.image != blank %}
            {% assign img_url = block.settings.image | img_url: '2048x' %}
            {% else %}
            {% assign img_url = "placeholder-image.jpg" | asset_url %}
            {% endif %}
            
            {% if block.settings.image_small != blank %}
            {% assign img_url_small = block.settings.image_small | img_url: 'large' %}
            {% else %}
            {% assign img_url_small = img_url %}
            {% endif %}
            {% if block.settings.wide_image == true %} 
            <div class="item_img small--hide {% if section.settings.full_height %}full-height{% else %}normal{% endif %}" style="background-image: url({{ img_url }});"></div>
            <div class="item_img hide small--show {% if section.settings.full_height %}full-height{% else %}normal{% endif %}" style="background-image: url({{ img_url_small }});"></div>
            {% else %}
            <div class="item_img small--hide {% if section.settings.full_height %}full-height{% else %}normal{% endif %} not-wide" style="background-image: url({{ img_url }});"></div>
            <div class="item_img hide small--show {% if section.settings.full_height %}full-height{% else %}normal{% endif %} not-wide" style="background-image: url({{ img_url_small }});"></div>
            {% endif %}
            <div class="item-overlay overlay-{{forloop.index}} text-{{block.settings.text_align}}" style="background-color: rgba({{block.settings.overlay_color}});">
              <div class="table">
                <div class="table-cell">
                  {% if block.settings.show_captions %}
                  <div class="captions" style="{% if block.settings.text_align == "left" %}margin-right:auto;{% elsif block.settings.text_align == "right" %}margin-left:auto;{% else %}margin-left: auto; margin-right: auto;{% endif %}">
                    {% if block.settings.title != "" %}
                        <h1 class="title {% if forloop.first %}animated {{block.settings.title_effect}}{% else %}invisible{% endif %}" data-effect="{{block.settings.title_effect}}" >{{ block.settings.title }}</h1>
                    {% endif %}
                    {% if block.settings.text != "" %}
                        <div class="text {% if forloop.first %}animated {{block.settings.text_effect}}{% else %}invisible{% endif %}" data-effect="{{block.settings.text_effect}}">{{ block.settings.text }}</div>
                    {% endif %}
                    {% if block.settings.button != "" %}
                      <a href="{{ block.settings.link }}" onClick="trackCarousel({{ forloop.index }});">
                        <button class="btn {% if forloop.first %}animated {{block.settings.button_effect}}{% else %}invisible{% endif %}" data-effect="{{block.settings.button_effect}}">{{ block.settings.button }}</button>
                      </a>
                    {% endif %}
                  </div>
                  {% endif %}
                  {% if block.settings.featured_image != blank %}
                  <div class="featured-img {% if forloop.first %}animated {{block.settings.image_effect}}{% else %}invisible{% endif %}" data-effect="{{block.settings.image_effect}}" style="background-image: url({{ block.settings.featured_image | img_url: '2048x' }}); background-position: {{block.settings.featured_image_position}}; width: {{block.settings.featured_image_width}}; right: {{block.settings.featured_image_right}}; left: {{block.settings.featured_image_left}};"></div>
                  {% endif %}
                </div>
              </div>
            </div>
        {% if block.settings.show_captions == false and block.settings.link != blank %}
          </a>
        {% endif %}
            
        {% if block.settings.button_top != "" or block.settings.button_right != "" or block.settings.button_bottom != "" or block.settings.button_left != "" %}
        <style>         
          #block-{{ block.id }} .btn{
            position:absolute;
            {% if block.settings.button_top != "" %}top:{{block.settings.button_top}};{% endif %}
            {% if block.settings.button_right != "" %}right:{{block.settings.button_right}};{% endif %}
            {% if block.settings.button_bottom != "" %}bottom:{{block.settings.button_bottom}};{% endif %}
            {% if block.settings.button_left != "" %}left:{{block.settings.button_left}};{% endif %}
          }
          @media all and (max-width: 600px) {
            #block-{{ block.id }} .btn{position:static;}
          }        
        </style>
        {% endif %}
      </div>
        
      {% if forloop.first == true %}
        <div class="hide small--show">
        {% include '_home_quick-links' %}
        </div>
      {% endif %}
  {% endfor %}
</div>
